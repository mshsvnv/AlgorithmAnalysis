\chapter{Аналитическая часть}
\section{Расстояние Левенштейна}

\textbf{Расстояние Левенштейна}\cite{levenshtein}  --- это минимальное количество редакторских операций вставки, замены и удаления, которые необходимо выполнить для преобразования одной строки в другую. 

Каждая операция имеет свою цену. Редакционное предписание - это последовательность действий, которую необходимо выполнить для получения из первой строки вторую, и минимизирующая суммарную цену. Эта  и цена есть искомое расстояние Левенштейна.

Введем следующие обозначения:
\begin{enumerate}[label=\arabic*)]
        \item \textbf{I} (от англ. insert) - вставка ($w(\lambda, b) = 1$);
        \item \textbf{R} (от англ. replace) - замена ($w(a, b) = 1$, $a \neq b$);
        \item \textbf{D} (от англ. delete) - удаление ($w(a, \lambda) = 1$)
        \item \textbf{M} (от англ. match) - совпадение ($w(a, b) = 0$, $a = b$);
\end{enumerate}

Также рассмотрим функцию $D(i, j)$: ее значением является
редакционное расстояние между подстроками $S_1[1...i]$ и $S_2[1...j]$.

Расстояние Левенштейна между двумя строками $S_{1}$ и $S_{2}$ (длиной $M$ и $N$ соответственно) рассчитывается по следующей рекуррентной формуле:
\begin{equation}
	\label{eq:L}
	D(i, j) =
	\begin{cases}
		0, &\text{i = 0, j = 0}\\
		i, &\text{j = 0, i > 0}\\
		j, &\text{i = 0, j > 0}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1,\\
			D(i - 1, j - 1) +  m(S_{1}[i], S_{2}[j]), \\
		\end{cases}
		&\text{i > 0, j > 0}
	\end{cases}
\end{equation}
где сравнение символов строк $S_1$ и $S_2$ рассчитывается таким образом:
\begin{equation}
	\label{eq:m}
	m(a, b) = \begin{cases}
		0 &\text{если a = b,}\\
		1 &\text{иначе.}
	\end{cases}
\end{equation}

\subsection{Нерекурсивный алгоритм нахождения расстояния Левенштейна}

При больших $M, N$ рекурсивная реализация алгоритма Левенштейна малоэффетивна \textbf{по времени} выполнения, поскольку промежуточные значения $D[i][j]$ вычисляются несколько раз. Для того, чтобы не производить одни и те же вычисления несколько раз, можно использовать матрицу для их хранения.

Матрица имеет следующие размеры:
\begin{equation}
	\label{eq:lev-m-size}
	(N + 1) \times (M + 1),
\end{equation}
где $M, N$ значения длин строк.

В ячейке $[i, j]$ хранится значение $D(S1[1...i], S2[1...j])$. Вся таблица заполняется в соответствии с формулой~(\ref{eq:L}). 

Однако при больших $M, N$ матричная реализация является малоэффективной \textbf{по памяти}, т.к. множество промежуточных значений $D(i,j)$ хранится в памяти после их использования. Для оптимизации по памяти рекурсивного алгоритма нахождения расстояния Левенштейна можно использовать \textit{кеш}, т.е. пару \textit{<<ключ>> : <<значение>>}, где:
\begin{itemize}
    \item \textit{ключ} - строка, хранящая текущие индексы строк;
    \item \textit{значение} - значение $D[i, j]$;
\end{itemize}

\section{Расстояние Дамерау-Левенштейна}
\textbf{Расстояние Дамерау-Левенштейна} --- это мера разницы двух строк символов, определяемая как минимальное количество операций вставки, удаления, замены и транспозиции (перестановки двух соседних символов), необходимых для перевода одной строки в другую. Является расширением расстояния Левенштейна, поскольку помимо трех базовых операций содержит еще операцию транспозиции $T$ (от англ. transposition).

Расстояние Дамерау-Левенштейна определятся следующей рекуррентной формуле:
\begin{equation}
	\label{eq:DL}
	D(i, j) = 
	\begin{cases}
            max(i, j), &\text{min($i, j$) = 0,}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1,\\
			D(i - 1, j - 1) + m(S_{1}[i], S_{2}[j]), \\
			D(i - 2, j - 2) + 1, \\
		\end{cases}
		& \begin{aligned}
			& \text{если $i, j > 1$}, \\
			& S_{1}[i] = S_{2}[j - 1], \\
			& S_{1}[i - 1] = S_{2}[j], \\
		\end{aligned}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1, \\
			D(i - 1, j - 1) + m(S_{1}[i], S_{2}[j]), \\
		\end{cases}
		 & \text{иначе.}
	\end{cases}
\end{equation}

\subsection{Рекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна}

Каждый рекурсивный вызов соответствует одному из случаев:
\begin{itemize}
    \item $D(i - 1, j) + 1$ соответствует удалению символа (из $S_{1}$ в $S_{1}$);
    \item $D(i, j - 1) + 1$ соответствует вставке символа строки (из $S_{1}$ в $S_{1}$);
    \item $D(i - 1, j - 1) + m(S_{1}[i], S_{2}[j]$ соответствие или несоответсвтие в зависимости от совпадения символов;
    \item $D(i - 2, j - 2) + 1$ в случае перестановки двух последовательных символов;
\end{itemize}

\subsection{Рекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна с кешированием}

Однако при больших $M, N$ рекурсивная реализация является малоэффективной \textbf{по времени}, поскольку приходится неоднократно считать одни и те же промежуточные значения. Для оптимизации по времени рекурсивного алгоритма нахождения расстояния Левенштейна можно использовать кеш, т.е. \textit{хеш-таблицу}, состоящую из пар \textit{<<ключ>> : <<значение>>}, где:
\begin{itemize}
    \item \textit{ключ} - строка, хранящая текущие индексы строк;
    \item \textit{значение} - значение $D[i, j]$;
\end{itemize}

\subsection{Нерекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна}

При больших значениях $M, N$ рекурсивная реализация алгоритма Дамерау-Левенштейна малоэффетивна \textbf{по времени} выполнения, поскольку промежуточные значения $D[i][j]$ вычисляются несколько раз. Для того, чтобы не производить одни и те же вычисления несколько раз, можно использовать матрицу для их хранения.

Матрица имеет следующие размеры:
\begin{equation}
	\label{eq:lev-m-size}
	(N + 1) \times (M + 1),
\end{equation}
где $M, N$ значения длин строк.

В ячейке $[i, j]$ хранится значение $D(S1[1...i], S2[1...j])$. Вся таблица заполняется в соответствии с формулой~(\ref{eq:DL}). 

\section*{Вывод}
Формулы для вычисления расстояний Левенштейна и \breakДамерау-Левенштейна задаются \textbf{рекуррентно}, поэтому алгоритмы для нахождения их расстояний можно реализовать как \textit{итеративно}, так и \textit{рекурсивно}.
