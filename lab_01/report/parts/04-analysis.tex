\chapter{Аналитическая часть}
\section{Расстояние Левенштейна}

Расстояние Левенштейна \cite{levenshtein} (редакционное расстояние, дистанция редактирования) --- метрика, измеряющая разность между двумя последовательностями символов. Расстояние Левенштейна --- это минимальное количество редакторских операций вставки (I, от англ. insert), замены (R, от англ. replace) и удаления (D, от англ. delete), необходимых для преобразования одной строки в другую. Стоимости операций могут зависеть от вида операций:
\begin{enumerate}[label=\arabic*)]
	\item $w(a, b)$ --- цена замены символа $a$ на $b$;
	\item $w(\lambda, b)$ --- цена вставки символа $b$;
	\item $w(a, \lambda)$ --- цена удаления символа $a$.
\end{enumerate}

Будем считать стоимость каждой вышеизложенной операции равной 1:
\begin{itemize}[label=---]
	\item $w(a, b) = 1$, $a \neq b$, в противном случае замена не происходит;
	\item $w(\lambda, b) = 1$;
	\item $w(a, \lambda) = 1$.
\end{itemize}

Введем понятие совпадения символов --- M (от англ. match). Его стоимость будет равна 0, то есть $w(a, a) = 0$.

Введем в рассмотрение функцию $D(i, j)$, значением которой является
редакционное расстояние между подстроками $S_1[1...i]$ и $S_2[1...j]$.

Расстояние Левенштейна между двумя строками $S_{1}$ и $S_{2}$ длиной $M$ и $N$ соответственно рассчитывается по рекуррентной формуле:
\begin{equation}
	\label{eq:L}
	D(i, j) =
	\begin{cases}
		0, &\text{i = 0, j = 0}\\
		i, &\text{j = 0, i > 0}\\
		j, &\text{i = 0, j > 0}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1,\\
			D(i - 1, j - 1) +  m(S_{1}[i], S_{2}[j]), \\
		\end{cases}
		&\text{i > 0, j > 0}
	\end{cases}
\end{equation}
где сравнение символов строк $S_1$ и $S_2$ рассчитывается как:
\begin{equation}
	\label{eq:m}
	m(a, b) = \begin{cases}
		0 &\text{если a = b,}\\
		1 &\text{иначе.}
	\end{cases}
\end{equation}

\subsection{Нерекурсивный алгоритм нахождения расстояния Левенштейна}

Рекурсивная реализация алгоритма Левенштейна малоэффективна по времени при больших $M$ и $N$, так как множество промежуточных значений  Для оптимизации можно использовать итерационную реализацию заполнения матрицы промежуточными значениями $D(i,j)$.

В качестве структуры данных для хранения промежуточных значений можно использовать матрицу, имеющую размеры:
\begin{equation}
	\label{eq:lev-m-size}
	(N + 1) \times (M + 1)
\end{equation}

Значения в ячейке $[i, j]$ равно значению $D(S1[1...i], S2[1...j])$. Первый элемент матрицы заполнен нулем. Всю таблицу заполнять в соответствии с формулой~(\ref{eq:L}). 

Однако матричный алгоритм является малоэффективным по памяти по сравнению с рекурсивным при больших $M$ и $N$, т.к. множество промежуточных значений $D(i,j)$ хранится в памяти после их использования. Для оптимизации по памяти рекурсивного алгоритма нахождения расстояния Левенштейна можно использовать кеш, т.е. пару строк, содержащую значения $D(i,j)$, вычисленные в предыдущей итерации, алгоритма и значения $D(i,j)$, вычисляемые в текущей итерации.

\section{Расстояние Дамерау-Левенштейна}
Расстояние Дамерау-Левенштейна, названное в честь ученых Фредерика Дамерау и Владимир Левенштейна, --- это мера разницы двух строк символов, определяемая как минимальное количество операций вставки, удаления, замены и транспозиции (перестановки двух соседних символов), необходимых для перевода одной строки в другую. Является модификацией расстояния Левенштейна: к трем базовым операциям добавляется операция транспозиции $T$ (от англ. transposition).

Расстояние Дамерау-Левенштейна может быть вычислено по рекуррентной формуле:

\begin{equation}
	\label{eq:DL}
	D(i, j) = 
	\begin{cases}
		0, &\text{i = 0, j = 0,}\\
		i, &\text{j = 0, i > 0,}\\
		j, &\text{i = 0, j > 0,}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1,\\
			D(i - 1, j - 1) + m(S_{1}[i], S_{2}[j]), \\
			D(i - 2, j - 2) + 1, \\
		\end{cases}
		& \begin{aligned}
			& \text{если i > 1, j > 1}, \\
			& S_{1}[i] = S_{2}[j - 1], \\
			& S_{1}[i - 1] = S_{2}[j], \\
		\end{aligned}\\
		min \begin{cases}
			D(i, j - 1) + 1,\\
			D(i - 1, j) + 1, \\
			D(i - 1, j - 1) + m(S_{1}[i], S_{2}[j]), \\
		\end{cases}
		 & \text{иначе.}
	\end{cases}
\end{equation}

\subsection{Рекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна}

Рекурсивный алгоритм реализует формулу (\ref{eq:DL}), функция $D$ составлена таким образом, что верно следующее.%\textbf{/*истинно/верно следующее / следующие положения*/}
\begin{enumerate}
	\item Для передачи из пустой строки в пустую требуется ноль операций.
	\item Для перевода из пустой строки в строку $a$ требуется $|a|$ операций.
	\item Для перевода из строки $a$ в пустую строку требуется $|a|$ операций.
	\item Для перевода из строки $a$ в строку $b$ требуется выполнить последовательно некоторое количество операций удаления, вставки, замены, транспозиции в некоторой последовательности. Последовательность поведения любых двух операций можно поменять, порядок поведения операций не имеет никакого значения.
	Если полагать, что \textit{a', b'} -- строки $a$ и $b$ без последнего символа соответственно, а \textit{a'', b''} -- строки $a$ и $b$ без двух последних символов, то цена преобразования из строки $a$ в $b$ выражается из элементов, представленных ниже:
	\begin{itemize}[label=---]
		\item сумма цены преобразования строки $a'$ в $b$ и цены проведения операции удаления, которая необходима для преобразования $a'$ в $a$;
		\item сумма цены преобразования строки $a$ в $b'$  и цены проведения операции вставки, которая необходима для преобразования $b'$ в $b$;
		\item сумма цены преобразования из $a'$ в $b'$ и операции замены, предполагая, что $a$ и $b$ оканчиваются на разные символы;
		\item сумма цены преобразования из $a''$ в $b''$ и операции перестановки, предполагая, что длины $a''$ и $b''$ больше 1 и последние два символа $a''$, поменянные местами, совпадут с двумя последними символами $b''$;
		\item цена преобразования из $a'$ в $b'$, предполагая, что $a$ и $b$ оканчиваются на один и тот же символ.
	\end{itemize}
\end{enumerate}

Минимальной стоимостью преобразования будет минимальное значение приведенных вариантов.

\subsection{Рекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна с кешированием}

Рекурсивная реализация алгоритма Дамерау-Левенштейна малоэффективна по времени при больших $M$ и $N$ по причине проблемы повторных вычислений значений расстояний между подстроками. Для оптимизации алгоритма нахождения расстояния Левенштейна можно использовать матрицу в целях хранения соответствующих промежуточных значений. В таком случае алгоритм представляет собой рекурсивное заполнение матрицы $A_{|a|,|b|}$ промежуточными значениями $D(i,j)$, такое хранение промежуточных данных можно назвать кешем для рекурсивного алгоритма.

\subsection{Нерекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна}

Рекурсивная реализация алгоритма Левенштейна с кешированием малоэффективна по времени при больших $M$ и $N$. Для оптимизации можно использовать итерационную реализацию заполнения матрицы промежуточными значениями $D(i,j)$.

В качестве структуры данных для хранения промежуточных значений можно использовать \textit{матрицу}, имеющую  размеры:

\begin{equation}
	(N + 1)\\\times(M + 1),
\end{equation}

Значение в ячейке $[i, j]$ равно значению $D(S1[1...i], S2[1...j])$. Первый элемент заполнен нулем. Всю таблицу заполняем в соответствии с формулой (\ref{eq:DL}).

\section*{Вывод}

В данном разделе были рассмотрены алгоритмы динамического программирования --- алгоритмы нахождения расстояний Левенштейна и Дамерау-Левенштейна, формулы которых задаются рекуррентно, а следовательно, данные алгоритмы могут быть реализованы рекурсивно и итеративно. На вход алгоритмам поступают две строки, которые могут содержать как русские, так и английские буквы, также будет предусмотрен ввод пустых строк.
